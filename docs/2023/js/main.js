// +/-5 min, 3 min groups
const motherOfAllData = JSON.parse('[{"id": 1, "name": "WarGames", "director": "John Badham", "start": "2023-03-04 16:00:00+00:00", "runtime": 114, "image": "wargames_ver1.jpg", "count": 1472, "likes": 7704, "intervals": [], "timestamps": [1677945420000.0, 1677945600000.0, 1677945780000.0, 1677945960000.0, 1677946140000.0, 1677946320000.0, 1677946500000.0, 1677946680000.0, 1677946860000.0, 1677947040000.0, 1677947220000.0, 1677947400000.0, 1677947580000.0, 1677947760000.0, 1677947940000.0, 1677948120000.0, 1677948300000.0, 1677948480000.0, 1677948660000.0, 1677948840000.0, 1677949020000.0, 1677949200000.0, 1677949380000.0, 1677949560000.0, 1677949740000.0, 1677949920000.0, 1677950100000.0, 1677950280000.0, 1677950460000.0, 1677950640000.0, 1677950820000.0, 1677951000000.0, 1677951180000.0, 1677951360000.0, 1677951540000.0, 1677951720000.0, 1677951900000.0, 1677952080000.0, 1677952260000.0, 1677952440000.0], "counts": [14, 49, 42, 40, 30, 61, 44, 49, 44, 56, 36, 37, 42, 39, 46, 49, 39, 44, 35, 37, 29, 35, 35, 33, 37, 36, 37, 36, 33, 39, 36, 32, 28, 21, 32, 40, 32, 40, 22, 13], "chartLineColor": "rgba(239, 207, 157, 1)", "chartFillColor": "rgba(239, 207, 157, 0.2)"}, {"id": 2, "name": "Superman III", "director": "Richard Lester", "start": "2023-03-04 18:30:00+00:00", "runtime": 125, "image": "superman_iii.jpg", "count": 1621, "likes": 7943, "intervals": [], "timestamps": [1677954420000.0, 1677954600000.0, 1677954780000.0, 1677954960000.0, 1677955140000.0, 1677955320000.0, 1677955500000.0, 1677955680000.0, 1677955860000.0, 1677956040000.0, 1677956220000.0, 1677956400000.0, 1677956580000.0, 1677956760000.0, 1677956940000.0, 1677957120000.0, 1677957300000.0, 1677957480000.0, 1677957660000.0, 1677957840000.0, 1677958020000.0, 1677958200000.0, 1677958380000.0, 1677958560000.0, 1677958740000.0, 1677958920000.0, 1677959100000.0, 1677959280000.0, 1677959460000.0, 1677959640000.0, 1677959820000.0, 1677960000000.0, 1677960180000.0, 1677960360000.0, 1677960540000.0, 1677960720000.0, 1677960900000.0, 1677961080000.0, 1677961260000.0, 1677961440000.0, 1677961620000.0, 1677961800000.0, 1677961980000.0], "counts": [13, 43, 51, 57, 49, 38, 39, 46, 55, 49, 42, 46, 36, 40, 40, 44, 36, 35, 36, 34, 25, 34, 41, 32, 41, 37, 24, 25, 41, 47, 56, 39, 49, 35, 33, 36, 25, 29, 43, 23, 25, 29, 23], "chartLineColor": "rgba(137, 195, 237, 1)", "chartFillColor": "rgba(137, 195, 237, 0.2)"}, {"id": 3, "name": "Mr. Mom", "director": "Stan Dragoti", "start": "2023-03-04 21:00:00+00:00", "runtime": 91, "image": "mr_mom.jpg", "count": 873, "likes": 4761, "intervals": [], "timestamps": [1677963420000.0, 1677963600000.0, 1677963780000.0, 1677963960000.0, 1677964140000.0, 1677964320000.0, 1677964500000.0, 1677964680000.0, 1677964860000.0, 1677965040000.0, 1677965220000.0, 1677965400000.0, 1677965580000.0, 1677965760000.0, 1677965940000.0, 1677966120000.0, 1677966300000.0, 1677966480000.0, 1677966660000.0, 1677966840000.0, 1677967020000.0, 1677967200000.0, 1677967380000.0, 1677967560000.0, 1677967740000.0, 1677967920000.0, 1677968100000.0, 1677968280000.0, 1677968460000.0, 1677968640000.0, 1677968820000.0, 1677969000000.0], "counts": [9, 30, 37, 30, 24, 28, 31, 43, 47, 17, 29, 28, 36, 25, 19, 24, 34, 18, 24, 34, 36, 32, 18, 24, 23, 18, 24, 29, 27, 30, 30, 17], "chartLineColor": "rgba(213, 216, 224, 1)", "chartFillColor": "rgba(213, 216, 224, 0.2)"}, {"id": 4, "name": "Krull", "director": "Peter Yates", "start": "2023-03-04 22:45:00+00:00", "runtime": 121, "image": "krull_ver2.jpg", "count": 1108, "likes": 5756, "intervals": [], "timestamps": [1677969720000.0, 1677969900000.0, 1677970080000.0, 1677970260000.0, 1677970440000.0, 1677970620000.0, 1677970800000.0, 1677970980000.0, 1677971160000.0, 1677971340000.0, 1677971520000.0, 1677971700000.0, 1677971880000.0, 1677972060000.0, 1677972240000.0, 1677972420000.0, 1677972600000.0, 1677972780000.0, 1677972960000.0, 1677973140000.0, 1677973320000.0, 1677973500000.0, 1677973680000.0, 1677973860000.0, 1677974040000.0, 1677974220000.0, 1677974400000.0, 1677974580000.0, 1677974760000.0, 1677974940000.0, 1677975120000.0, 1677975300000.0, 1677975480000.0, 1677975660000.0, 1677975840000.0, 1677976020000.0, 1677976200000.0, 1677976380000.0, 1677976560000.0, 1677976740000.0, 1677976920000.0, 1677977100000.0], "counts": [14, 39, 34, 31, 29, 35, 35, 31, 34, 37, 39, 24, 27, 27, 24, 20, 30, 27, 19, 29, 21, 39, 23, 18, 16, 26, 19, 16, 15, 17, 34, 33, 18, 21, 35, 30, 29, 36, 19, 17, 26, 13], "chartLineColor": "rgba(250, 237, 53, 1)", "chartFillColor": "rgba(250, 237, 53, 0.2)"}, {"id": 5, "name": "Valley Girl", "director": "Martha Coolidge", "start": "2023-03-05 01:15:00+00:00", "runtime": 99, "image": "valley_girl.jpg", "count": 1029, "likes": 4948, "intervals": [], "timestamps": [1677978720000.0, 1677978900000.0, 1677979080000.0, 1677979260000.0, 1677979440000.0, 1677979620000.0, 1677979800000.0, 1677979980000.0, 1677980160000.0, 1677980340000.0, 1677980520000.0, 1677980700000.0, 1677980880000.0, 1677981060000.0, 1677981240000.0, 1677981420000.0, 1677981600000.0, 1677981780000.0, 1677981960000.0, 1677982140000.0, 1677982320000.0, 1677982500000.0, 1677982680000.0, 1677982860000.0, 1677983040000.0, 1677983220000.0, 1677983400000.0, 1677983580000.0, 1677983760000.0, 1677983940000.0, 1677984120000.0, 1677984300000.0, 1677984480000.0, 1677984660000.0, 1677984840000.0], "counts": [10, 39, 43, 37, 33, 49, 36, 29, 36, 29, 34, 30, 26, 30, 31, 37, 22, 44, 31, 26, 22, 27, 35, 36, 30, 30, 15, 22, 24, 17, 29, 20, 33, 28, 12], "chartLineColor": "rgba(97, 56, 121, 1)", "chartFillColor": "rgba(97, 56, 121, 0.2)"}, {"id": 6, "name": "Return of the Jedi", "director": "Richard Marquand", "start": "2023-03-05 03:00:00+00:00", "runtime": 131, "image": "return_of_the_jedi_ver1.jpg", "count": 1234, "likes": 8857, "intervals": [], "timestamps": [1677985020000.0, 1677985200000.0, 1677985380000.0, 1677985560000.0, 1677985740000.0, 1677985920000.0, 1677986100000.0, 1677986280000.0, 1677986460000.0, 1677986640000.0, 1677986820000.0, 1677987000000.0, 1677987180000.0, 1677987360000.0, 1677987540000.0, 1677987720000.0, 1677987900000.0, 1677988080000.0, 1677988260000.0, 1677988440000.0, 1677988620000.0, 1677988800000.0, 1677988980000.0, 1677989160000.0, 1677989340000.0, 1677989520000.0, 1677989700000.0, 1677989880000.0, 1677990060000.0, 1677990240000.0, 1677990420000.0, 1677990600000.0, 1677990780000.0, 1677990960000.0, 1677991140000.0, 1677991320000.0, 1677991500000.0, 1677991680000.0, 1677991860000.0, 1677992040000.0, 1677992220000.0, 1677992400000.0, 1677992580000.0, 1677992760000.0, 1677992940000.0], "counts": [15, 30, 36, 32, 30, 48, 34, 29, 38, 33, 31, 30, 38, 23, 22, 22, 32, 33, 24, 19, 25, 27, 24, 26, 22, 29, 31, 15, 18, 25, 19, 20, 33, 25, 23, 23, 21, 28, 19, 28, 32, 24, 29, 42, 24], "chartLineColor": "rgba(246, 118, 95, 1)", "chartFillColor": "rgba(246, 118, 95, 0.2)"}]')


var chartOptions = {
  responsive: false,
  maintainAspectRatio: false,
  scales: {
    x: {
      display: true,
      title: {
        display: false,
      },
      grid: {
        display: false,
      },
      ticks: {
        color: 'rgba(255, 255, 255, 1)',
      },
      type: 'time',
      time: {
        // Luxon format string
        //   localized date with full month
        //   localized time
        tooltipFormat: 'DDD t'
      },
      adapters: {
        date: {
        },
      },
    },
    y: {
      display: true,
      title: {
        display: false,
      },
      grid: {
        color: 'rgba(255, 255, 255, 0.2)',
        tickColor: 'rgba(255, 255, 255, 1)'
      },
      ticks: {
        color: 'rgba(255, 255, 255, 1)',
      },
      suggestedMin: 0,
    }
  },
  plugins: {
    legend: {
      display: false
    }
  }
}


for (var i = 0; i < motherOfAllData.length; i++) {
  let movie = motherOfAllData[i]
  let movieData = {
    labels: movie.timestamps,
    datasets: [
      {
        label: "Tweets",
        data: movie.counts,
        borderColor: movie.chartLineColor,
        backgroundColor: movie.chartFillColor,
        fill: true,
        cubicInterpolationMode: 'monotone',
        tension: 0.4
      }
    ]
  };

  var moviectx = document.getElementById('movie' + movie.id + 'chart').getContext('2d');
  var movieChart = new Chart(moviectx, {
    type: 'line',
    data: movieData,
    options: chartOptions,
  });

  document.getElementById('movie' + movie.id + 'title').innerHTML = movie.name
  document.getElementById('movie' + movie.id + 'director').innerHTML = 'Directed by ' + movie.director
  document.getElementById('movie' + movie.id + 'tweets').innerHTML = movie.count + ' tweets'
  document.getElementById('movie' + movie.id + 'likes').innerHTML = movie.likes + ' likes'

  var baseImgPath = 'img/art/'
  var imgElement = document.getElementById('movie' + movie.id + 'image');
  imgElement.setAttribute('src', baseImgPath + movie.image);
  imgElement.setAttribute('alt', movie.name);

  var thumbImg = document.getElementById('movie' + movie.id + 'thumb');
  thumbImg.setAttribute('src', baseImgPath + movie.image);
  thumbImg.setAttribute('alt', "Jump to " + movie.name);
}
