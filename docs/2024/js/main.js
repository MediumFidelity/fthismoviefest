// +/-5 min, 3 min groups
const motherOfAllData = JSON.parse('[{"id": 1, "name": "The Mask", "director": "Chuck Russell", "start": "2024-02-24 16:00:00+00:00", "runtime": 101, "image": "mask.jpg", "count": 1597, "likes": 8915, "intervals": [], "timestamps": [1708790220000.0, 1708790400000.0, 1708790580000.0, 1708790760000.0, 1708790940000.0, 1708791120000.0, 1708791300000.0, 1708791480000.0, 1708791660000.0, 1708791840000.0, 1708792020000.0, 1708792200000.0, 1708792380000.0, 1708792560000.0, 1708792740000.0, 1708792920000.0, 1708793100000.0, 1708793280000.0, 1708793460000.0, 1708793640000.0, 1708793820000.0, 1708794000000.0, 1708794180000.0, 1708794360000.0, 1708794540000.0, 1708794720000.0, 1708794900000.0, 1708795080000.0, 1708795260000.0, 1708795440000.0, 1708795620000.0, 1708795800000.0, 1708795980000.0, 1708796160000.0, 1708796340000.0], "counts": [21, 55, 74, 48, 55, 44, 61, 53, 47, 69, 47, 49, 41, 44, 53, 43, 44, 36, 32, 39, 41, 54, 44, 47, 41, 47, 51, 33, 40, 38, 38, 31, 46, 27, 23], "chartLineColor": "rgba(117, 197, 93, 1)", "chartFillColor": "rgba(117, 197, 93, 0.2)"}, {"id": 2, "name": "Stargate", "director": "Roland Emmerich", "start": "2024-02-24 18:15:00+00:00", "runtime": 121, "image": "stargate.jpg", "count": 1391, "likes": 7913, "intervals": [], "timestamps": [1708798320000.0, 1708798500000.0, 1708798680000.0, 1708798860000.0, 1708799040000.0, 1708799220000.0, 1708799400000.0, 1708799580000.0, 1708799760000.0, 1708799940000.0, 1708800120000.0, 1708800300000.0, 1708800480000.0, 1708800660000.0, 1708800840000.0, 1708801020000.0, 1708801200000.0, 1708801380000.0, 1708801560000.0, 1708801740000.0, 1708801920000.0, 1708802100000.0, 1708802280000.0, 1708802460000.0, 1708802640000.0, 1708802820000.0, 1708803000000.0, 1708803180000.0, 1708803360000.0, 1708803540000.0, 1708803720000.0, 1708803900000.0, 1708804080000.0, 1708804260000.0, 1708804440000.0, 1708804620000.0, 1708804800000.0, 1708804980000.0, 1708805160000.0, 1708805340000.0, 1708805520000.0, 1708805700000.0], "counts": [13, 44, 53, 36, 52, 49, 41, 46, 44, 41, 39, 42, 32, 30, 47, 34, 33, 27, 30, 33, 32, 34, 25, 23, 29, 16, 22, 27, 19, 32, 20, 15, 29, 36, 31, 33, 27, 27, 42, 32, 16, 13], "chartLineColor": "rgba(221, 132, 61, 1)", "chartFillColor": "rgba(221, 132, 61, 0.2)"}, {"id": 3, "name": "Terminal Velocity", "director": "Deran Serafian", "start": "2024-02-24 20:45:00+00:00", "runtime": 102, "image": "terminal_velocity_ver1.jpg", "count": 1165, "likes": 4638, "intervals": [], "timestamps": [1708807320000.0, 1708807500000.0, 1708807680000.0, 1708807860000.0, 1708808040000.0, 1708808220000.0, 1708808400000.0, 1708808580000.0, 1708808760000.0, 1708808940000.0, 1708809120000.0, 1708809300000.0, 1708809480000.0, 1708809660000.0, 1708809840000.0, 1708810020000.0, 1708810200000.0, 1708810380000.0, 1708810560000.0, 1708810740000.0, 1708810920000.0, 1708811100000.0, 1708811280000.0, 1708811460000.0, 1708811640000.0, 1708811820000.0, 1708812000000.0, 1708812180000.0, 1708812360000.0, 1708812540000.0, 1708812720000.0, 1708812900000.0, 1708813080000.0, 1708813260000.0, 1708813440000.0, 1708813620000.0], "counts": [16, 48, 30, 56, 38, 28, 44, 47, 30, 28, 34, 33, 31, 26, 28, 26, 30, 38, 22, 39, 42, 34, 37, 21, 31, 17, 26, 21, 28, 32, 38, 36, 30, 42, 14, 11], "chartLineColor": "rgba(242, 234, 114, 1)", "chartFillColor": "rgba(242, 234, 114, 0.2)"}, {"id": 4, "name": "Cabin Boy", "director": "Adam Resnick", "start": "2024-02-24 22:45:00+00:00", "runtime": 80, "image": "cabin_boy.jpg", "count": 621, "likes": 3127, "intervals": [], "timestamps": [1708814520000.0, 1708814700000.0, 1708814880000.0, 1708815060000.0, 1708815240000.0, 1708815420000.0, 1708815600000.0, 1708815780000.0, 1708815960000.0, 1708816140000.0, 1708816320000.0, 1708816500000.0, 1708816680000.0, 1708816860000.0, 1708817040000.0, 1708817220000.0, 1708817400000.0, 1708817580000.0, 1708817760000.0, 1708817940000.0, 1708818120000.0, 1708818300000.0, 1708818480000.0, 1708818660000.0, 1708818840000.0, 1708819020000.0, 1708819200000.0, 1708819380000.0], "counts": [6, 29, 28, 30, 34, 26, 22, 24, 19, 18, 22, 24, 16, 23, 25, 22, 16, 12, 16, 20, 22, 22, 23, 17, 17, 15, 24, 18], "chartLineColor": "rgba(217, 197, 95, 1)", "chartFillColor": "rgba(217, 197, 95, 0.2)"}, {"id": 5, "name": "Timecop", "director": "Peter Hyams", "start": "2024-02-25 00:30:00+00:00", "runtime": 98, "image": "timecop.jpg", "count": 995, "likes": 4746, "intervals": [], "timestamps": [1708820820000.0, 1708821000000.0, 1708821180000.0, 1708821360000.0, 1708821540000.0, 1708821720000.0, 1708821900000.0, 1708822080000.0, 1708822260000.0, 1708822440000.0, 1708822620000.0, 1708822800000.0, 1708822980000.0, 1708823160000.0, 1708823340000.0, 1708823520000.0, 1708823700000.0, 1708823880000.0, 1708824060000.0, 1708824240000.0, 1708824420000.0, 1708824600000.0, 1708824780000.0, 1708824960000.0, 1708825140000.0, 1708825320000.0, 1708825500000.0, 1708825680000.0, 1708825860000.0, 1708826040000.0, 1708826220000.0, 1708826400000.0, 1708826580000.0, 1708826760000.0], "counts": [7, 33, 42, 30, 49, 37, 35, 27, 29, 35, 31, 25, 31, 36, 37, 45, 21, 17, 29, 34, 14, 16, 20, 15, 26, 24, 19, 35, 24, 24, 33, 26, 43, 12], "chartLineColor": "rgba(117, 191, 128, 1)", "chartFillColor": "rgba(117, 191, 128, 0.2)"}, {"id": 6, "name": "Speed", "director": "Jan de Bont", "start": "2024-02-25 02:30:00+00:00", "runtime": 116, "image": "speed_xlg.jpg", "count": 1466, "likes": 8175, "intervals": [], "timestamps": [1708828020000.0, 1708828200000.0, 1708828380000.0, 1708828560000.0, 1708828740000.0, 1708828920000.0, 1708829100000.0, 1708829280000.0, 1708829460000.0, 1708829640000.0, 1708829820000.0, 1708830000000.0, 1708830180000.0, 1708830360000.0, 1708830540000.0, 1708830720000.0, 1708830900000.0, 1708831080000.0, 1708831260000.0, 1708831440000.0, 1708831620000.0, 1708831800000.0, 1708831980000.0, 1708832160000.0, 1708832340000.0, 1708832520000.0, 1708832700000.0, 1708832880000.0, 1708833060000.0, 1708833240000.0, 1708833420000.0, 1708833600000.0, 1708833780000.0, 1708833960000.0, 1708834140000.0, 1708834320000.0, 1708834500000.0, 1708834680000.0, 1708834860000.0, 1708835040000.0], "counts": [22, 62, 53, 50, 37, 36, 31, 33, 28, 43, 40, 46, 44, 28, 31, 31, 34, 28, 42, 27, 26, 35, 32, 48, 40, 38, 27, 33, 39, 20, 21, 39, 29, 26, 38, 35, 32, 37, 48, 39], "chartLineColor": "rgba(242, 190, 92, 1)", "chartFillColor": "rgba(242, 190, 92, 0.2)"}]')

var chartOptions = {
  responsive: false,
  maintainAspectRatio: false,
  scales: {
    x: {
      display: true,
      title: {
        display: false,
      },
      grid: {
        display: false,
      },
      ticks: {
        color: 'rgba(255, 255, 255, 1)',
      },
      type: 'time',
      time: {
        // Luxon format string
        //   localized date with full month
        //   localized time
        tooltipFormat: 'DDD t'
      },
      adapters: {
        date: {
        },
      },
    },
    y: {
      display: true,
      title: {
        display: false,
      },
      grid: {
        color: 'rgba(255, 255, 255, 0.2)',
        tickColor: 'rgba(255, 255, 255, 1)'
      },
      ticks: {
        color: 'rgba(255, 255, 255, 1)',
      },
      suggestedMin: 0,
    }
  },
  plugins: {
    legend: {
      display: false
    }
  }
}


for (var i = 0; i < motherOfAllData.length; i++) {
  let movie = motherOfAllData[i]
  let movieData = {
    labels: movie.timestamps,
    datasets: [
      {
        label: "Tweets",
        data: movie.counts,
        borderColor: movie.chartLineColor,
        backgroundColor: movie.chartFillColor,
        fill: true,
        cubicInterpolationMode: 'monotone',
        tension: 0.4
      }
    ]
  };

  var moviectx = document.getElementById('movie' + movie.id + 'chart').getContext('2d');
  var movieChart = new Chart(moviectx, {
    type: 'line',
    data: movieData,
    options: chartOptions,
  });

  document.getElementById('movie' + movie.id + 'title').innerHTML = movie.name
  document.getElementById('movie' + movie.id + 'director').innerHTML = 'Directed by ' + movie.director
  document.getElementById('movie' + movie.id + 'tweets').innerHTML = movie.count + ' tweets'
  document.getElementById('movie' + movie.id + 'likes').innerHTML = movie.likes + ' likes'

  var baseImgPath = 'img/art/'
  var imgElement = document.getElementById('movie' + movie.id + 'image');
  imgElement.setAttribute('src', baseImgPath + movie.image);
  imgElement.setAttribute('alt', movie.name);

  var thumbImg = document.getElementById('movie' + movie.id + 'thumb');
  thumbImg.setAttribute('src', baseImgPath + movie.image);
  thumbImg.setAttribute('alt', "Jump to " + movie.name);
}
